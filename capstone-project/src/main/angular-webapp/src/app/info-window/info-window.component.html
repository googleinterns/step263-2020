<!DOCTYPE html>

<head>
</head>

<body>
    <div *ngIf="type==MarkerAction.DISPLAY">
        <h1>{{animal}}</h1>
        <div>
            {{description}}<br> Reported by: {{reporter}}<br>
        </div>
        <br>
        <img *ngIf="imageUrl" [src]="this.domSanitizer.bypassSecurityTrustUrl(imageUrl)" width="200px" height="auto"><br>
        <br>
        <button (click)="delete()">Delete</button>
        <button (click)="update()">Update</button>
    </div>
    <div *ngIf="type==MarkerAction.CREATE">
        <input #inputAnimal placeholder="Animal"><br>
        <input #inputDescription placeholder="Description"><br>
        <div *ngIf="!user">
            <input #inputReporter placeholder="Reporter's Name"><br>
            <form enctype="multipart/form-data">
                <input #inputImage type="file" name="image" accept="image/png, image/jpg" (change)="postFile($event.target.files)"><br>
            </form>
            <button [disabled]="isUploading" (click)="submit(inputAnimal.value, inputDescription.value, inputReporter.value)">Submit</button>
        </div>
        <div *ngIf="user">
            <input #inputReporterUser value="{{user.name}}"><br>
            <form enctype="multipart/form-data">
                <input #inputImage type="file" name="image" accept="image/png, image/jpg" (change)="postFile($event.target.files)"><br>
            </form>
            <button [disabled]="isUploading" (click)="submit(inputAnimal.value, inputDescription.value, inputReporterUser.value)">Submit</button>
        </div>
    </div>
    <div *ngIf="type==MarkerAction.UPDATE">
        <input #inputAnimal value="{{animal}}"><br>
        <input #inputDescription value="{{description}}"><br>
        <input #inputReporter value="{{reporter}}"><br>
        <div *ngIf="imageUrl">
            Current image is: <br>
            <img [src]="this.domSanitizer.bypassSecurityTrustUrl(imageUrl)" width="200px" height="auto"><br> You can choose a new image here: <br>
            <form enctype="multipart/form-data">
                <input #inputImage type="file" name="image" accept="image/png, image/jpg" (change)="postFile($event.target.files)"><br>
            </form>
            <br>
            <button (click)="removeImage($event)">Remove Image</button><br>
            <br>
        </div>
        <div *ngIf="!imageUrl">
            No image available <br> You can add an image here: <br>
            <form enctype="multipart/form-data">
                <input #inputImage type="file" name="image" accept="image/png, image/jpg" (change)="postFile($event.target.files)"><br>
            </form>
        </div>
        <button (click)="submit(inputAnimal.value, inputDescription.value, inputReporter.value)">Update</button>
    </div>
</body>